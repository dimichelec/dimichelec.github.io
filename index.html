<!DOCTYPE html>
<html>
<meta charset="UTF-8">

<style>
#frame {
	border-width: 0;
	position:absolute;
	top:0; left:0;
	height:1200px; width:1600px;
}
.odds_frame {
	border-width: 0;
	position:absolute;
	top:40px; left:40px;
	height:1120px; width:1520px;
}
.ads_frame {
	border-width: 0;
	position:absolute;
	top:40px; left:40px;
	height:1120px; width:1520px;
}
</style>

<iframe id='frame'></iframe>
<iframe id='odds_0' class='odds_frame'></iframe>
<iframe id='odds_1' class='odds_frame'></iframe>
<iframe id='ads_0'  class='ads_frame'></iframe>

<script src="../src/js-yaml"></script>
<script>

var doc = jsyaml.load('rotator.yml');

var odds_rotation_time = 5;	// in seconds
var odds_rotation = [
    //'college_football',
    //'superbowl_futures'
    'pro_basketball',
    'nba_futures',
    'nba_east_futures',
    'nba_west_futures',
    'college_basketball',
    'pro_hockey',
    'pro_tennis',
    'pro_baseball',
    'mlb_world_series_futures',
    'pro_boxing',
    'ufc_mma'
];

var odds_cache_toggle = false;
var odds_rotation_index = 0;

var frame = document.getElementById('frame');
var odds_0 = document.getElementById('odds_0');
var odds_1 = document.getElementById('odds_1');
var ads_0 = document.getElementById('ads_0');

frame.style.backgroundImage = "url('../img/rotator-frame.png')";
frame.style.zIndex = 999; // front

odds_0.style.zIndex = 0; // middle
odds_1.style.zIndex = -1; // back
ads_0.style.zIndex = -2; // wayback


var main_url =
   "https://c3-static.kambi.com/digital-signage-client/?"
 + "offering=dkusnjrl&branding=draftkings&"
 + "market=US&oddsFormat=american&locale=en_US&env=prod&"
 + "loop=true&loopInterval=4000&";
var sports = [];
sports['pro_football'] = "sport=american_football&title=PRO%20FOOTBALL&betofferColumns=1,2,3,4";
sports['college_football'] = "sport=american_football&couponId=170&title=COLLEGE%20FOOTBALL&betofferColumns=1,2,3";
sports['pro_basketball'] = "sport=basketball&title=PRO%20BASKETBALL&betofferColumns=1,2,3,4";
sports['college_basketball'] = "sport=basketball&title=COLLEGE%20BASKETBALL&betofferColumns=1,2,3,4";
sports['pro_hockey'] = "sport=ice_hockey&title=HOCKEY&betofferColumns=1,2,3";
sports['pro_tennis'] = "sport=tennis&title=TENNIS&betofferColumns=1,2,3";
sports['pro_baseball'] = "sport=baseball&title=PRO%20BASEBALL&betofferColumns=1,2,3";
sports['pro_boxing'] = "sport=boxing&title=PRO%20BOXING&couponId=223";
sports['ufc_mma'] = "sport=martial_arts&title=UFC/MMA&couponId=255";
sports['superbowl_futures'] = "sport=american_football&title=SUPERBOWL%20FUTURES&couponId=256";
sports['nba_futures'] = "eventType=competition&couponId=259&daysInAdvance=365";
sports['nba_east_futures'] = "eventType=competition&couponId=260&daysInAdvance=365";
sports['nba_west_futures'] = "eventType=competition&couponId=261&daysInAdvance=365";
sports['mlb_world_series_futures'] = "eventType=competition&couponId=262&daysInAdvance=365";

odds_0.src = main_url + sports[odds_rotation[odds_rotation_index]];
incOddsRotation();
odds_1.src = main_url + sports[odds_rotation[odds_rotation_index]];
incOddsRotation();

setTimeout(rotateOdds, odds_rotation_time*1000);


function rotateOdds() {
	if (odds_cache_toggle) {
		odds_1.style.zIndex = 0;
		odds_0.style.zIndex = -1;
		odds_0.src = main_url + sports[odds_rotation[odds_rotation_index]];
	} else {
		odds_0.style.zIndex = 0;
		odds_1.style.zIndex = -1;
		odds_1.src = main_url + sports[odds_rotation[odds_rotation_index]];
	}
	odds_cache_toggle = !odds_cache_toggle;
	incOddsRotation();
	setTimeout(rotateOdds, odds_rotation_time*1000);
}

function incOddsRotation() {
	odds_rotation_index++;
	if (odds_rotation_index >= odds_rotation.length) {
		odds_rotation_index = 0;
	}
}

</script>


</html>
